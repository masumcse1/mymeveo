<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.org/seam/faces"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:hftl="http://hftl.org"
	xmlns:hf="http://xmlns.jcp.org/jsf/composite/tags"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:o="http://omnifaces.org/ui">

	<p:dialog id="#{prefix}_childEntityPopup"
		widgetVar="#{prefix}_childEntityPopup" modal="true" draggable="false"
		resizable="false" style="max-width:80%">
		<h:form width="100%">

			<c:if test="#{customTableBean.listSize > 0}">

				<p:fieldset legend="#{childEntityPopupBean.cetCode}">
					<h:panelGrid columns="5" cellspacing="5" width="100%">
						<c:forEach items="#{childEntityPopupBean.fields}" var="cft">
							<h:panelGrid columns="3">
								<h:outputText value="#{cft.code} :" />
								<hftl:customFieldValueField
									entity="#{customEntityInstanceBean.entity}" cft="#{cft}"
									field="#{childEntityPopupBean.values.getCfValue(cft.dbFieldname)}"
									edit="true" />
							</h:panelGrid>
						</c:forEach>
					</h:panelGrid>
				</p:fieldset>
				<p:commandButton value="Save"
					style="margin-top: 5px; margin-left: 1px;"
					action="#{bean.onChildEntityUpdated(childEntityPopupBean.values)}"
					update="#{update}"
					oncomplete="PF('#{prefix}_childEntityPopup').hide()">
				</p:commandButton>

			</c:if>
		</h:form>
	</p:dialog>
</ui:composition>
